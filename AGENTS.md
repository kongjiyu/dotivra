# Repository Guidelines

## Project Structure & Module Organization
- `src/` hosts the React + TypeScript client with feature folders (`pages/`, `components/`, `context/`, `services/`, `lib/`, `hooks/`). Keep cross-cutting utilities in `utils.ts`.
- `public/` contains static assets served by Vite; avoid editing `dist/`, which is generated by the build.
- `server.js` exposes the Express + WebSocket API; grow server-only helpers inside a dedicated `server/` folder as needed.
- `functions/` holds Firebase Cloud Functions (`src/` TypeScript compiled into `lib/`). Coordinate changes with `firebase.json`, `firestore.rules`, and `firestore.indexes.json`.

## Build, Test, and Development Commands
- `npm run dev` starts the Vite client at `http://localhost:5173`.
- `npm run server` runs the Express API with `.env` configuration.
- `npm run dev:all` launches client and API together via `concurrently`.
- `npm run build` runs the TypeScript project build and emits production assets into `dist/`.
- `npm run preview` serves the built bundle for production smoke tests.
- `npm run lint` lints the repo with `eslint.config.js`.
- `npm run deploy[:frontend|:functions]` executes Firebase deploy targets; ensure `firebase login` before running.

## Coding Style & Naming Conventions
- Favor TypeScript throughout, using 2-space indentation, PascalCase components, and camelCase hooks/utilities.
- Prefer absolute imports with the `@/` alias and group Tailwind utility classes logically for readability.
- Run `npm run lint`; resolve warnings unless a TODO explains the exception.

## Testing Guidelines
- Automated tests are not yet configured; introduce Vitest + React Testing Library under `src/__tests__/` when adding coverage.
- Name test files `Component.test.tsx` or `module.spec.ts`, mirroring the source structure.
- For API changes, document manual verification (endpoint, payload, expected JSON) in the PR until automated suites land.

## Commit & Pull Request Guidelines
- Follow the existing imperative-style commit messages (`Implement document loading ...`). Start with a verb, keep the subject under 72 characters, and note key scope (`DocumentEditor`, `server`, etc.).
- PRs should summarize the change, note required environment or data updates, and link the corresponding issue/task. Attach screenshots or terminal output when UI or API responses change.
- Verify `npm run lint`, spot-check the relevant flows, and mention any Firebase rules/index updates when applicable.

## Security & Configuration Tips
- Store Firebase credentials in `.env`; confirm keys match those referenced by `firebase.json` before deploying.
- Use `firebase emulators:start` or `npm run firebase:serve` to validate Cloud Functions without touching production data.
